<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>卓越物流管理系统</title>
<link rel="stylesheet" href="css/bootstrap.css" />
<link rel="stylesheet" href="css/css.css" />
<script type="text/javascript" src="js/jquery1.9.0.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/sdmenu.js"></script>
<script type="text/javascript" src="js/laydate/laydate.js"></script>
<script type="text/javascript">
    //   辅助向url后添加查询字符串
    function addURLParam(url,name,value){
        url += (url.indexOf("?") == -1 ? "?":"&");
        url += encodeURIComponent(name) + "=" + encodeURIComponent(value);
        return url;
    }
 function searchPackage() {
     var Id= document.getElementById(input18),value;
     var url = "http://localhost:8080/TestCxfHibernate_war_exploded/REST/Domain/getExpressSheet";
     alert(Id);
     /*url = addURLParam(url,"id",Id);
     url = addURLParam(url,"_type","json");*/
     alert(url);
     var xhr = new XMLHttpRequest();
     xhr.open("post",url,true);
     xhr.onreadystatechange = function () {
         if(xhr.readyState == 4){
             if((xhr.status >= 200 && xhr.status <300) || xhr.status ==304){
                 alert(xhr.responseText+"=======");
             }else{
                 alert("Request was unsuccessful: "+xhr.status);
             }
         }
     };
     xhr.setRequestHeader("Content_Type","application/json")
	 xhr.send(JSON.parse(Id));
	 
 }
	
</script>
</head>

<body>
<div class="header">
	 <div class="logo"><img  src="img/网站大标题0.png" /></div>
     
				<div class="header-right">
                <i class="icon-question-sign icon-white"></i> <a href="#">帮助</a> <i class="icon-off icon-white"></i> <a id="modal-973558" href="#modal-container-973558" role="button" data-toggle="modal">注销</a> <i class="icon-user icon-white"></i> <a href="#">管理员的工作平台</a> <i class="icon-envelope icon-white"></i> <a href="#">发送短信</a>
                <div id="modal-container-973558" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width:300px; margin-left:-150px; top:30%">
				<div class="modal-header">
					 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					<h3 id="myModalLabel">
						注销系统
					</h3>
				</div>
				<div class="modal-body">
					<p>
						您确定要注销退出系统吗？
					</p>
				</div>
				<div class="modal-footer">
					 <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button> <a class="btn btn-primary" style="line-height:20px;" href="login.html" >确定退出</a>
				</div>
			</div>
				</div>
</div>
<!-- 顶部 -->     
            
<div id="middle">
     <div class="left">
     
     <script type="text/javascript">
var myMenu;
window.onload = function() {
	myMenu = new SDMenu("my_menu");
	myMenu.init();
};
</script>

		 <div id="my_menu" class="sdmenu">
			 <div>
				 <span>用户管理</span>
				 <a id="11" href="searchAndDelete.html">查询/删除用户</a>
				 <a id="12" href="addAndEditUser.html">增加/编辑用户</a>
			 </div>
			 <div class="collapsed">
				 <span>营业网点查询</span>
				 <a id="21" href="singleSearch.html">单个网点查询</a>
			 </div>
			 <div class="collapsed">
				 <span>快件管理</span>
				 <a id="31" href="expressDetail.html.html">快件详细信息查询</a>
				 <a id="32" href="expressTransList.html">快件转运列表追踪</a>
				 <a id="33" href="expressTransList.html">快件转运地图追踪</a>
			 </div>

			 <div class="collapsed">
				 <span>包裹管理</span>
				 <a id="41" href="packageSearch.html">包裹单查询</a>
				 <a id="42" href="productPackage.html.html">生成包裹单</a>
			 </div>
			 <div class="collapsed">
				 <span>任务分配</span>
				 <a id="51" href="transTask.html">转运任务分配</a>
				 <a id="52" href="deliverTask.html">派送任务分配</a>
			 </div>
		 </div>
     </div>
     <div class="Switch"></div>
     <script type="text/javascript">
	$(document).ready(function(e) {
    $(".Switch").click(function(){
	$(".left").toggle();
	 
		});
});
</script>

     <div class="right"  id="mainFrame">
     
     <div class="right_cont">
<ul class="breadcrumb">当前位置：
  <a href="#">快件管理</a> <span class="divider">/</span>

  快件详细信息查询
</ul>
   <div class="title_right"><strong>快件详细信息查询</strong></div>  
   <div style="width:900px; margin:auto">
       <table class="table table-bordered">
     <tr>
     <td width="12%" align="center" bgcolor="#f1f1f1">快件单号：</td>
     <td width="21%"><input style="width:300px" type="text" name="input18" id="001" width="200"  /></td>
	 <td width="12%" align="center" bgcolor="#f1f1f1">包裹单号：</td>
     <td width="21%"><input style="width:300px" type="text" name="input18" id="004" width="200" /></td>
     </tr>
	 <tr>
	 <td width="12%" align="center" bgcolor="#f1f1f1">寄件人手机号：</td>
     <td width="21%"><input style="width:300px" type="text" name="input18" id="002" width="200" /></td>
     <td width="12%" align="center" bgcolor="#f1f1f1">收件人手机号：</td>
     <td width="21%"><input style="width:300px" type="text" name="" id="003"  width="200"  /></td>
     </tr>
       </table>
       <table  class="margin-bottom-20 table  no-border" >
        <tr>
     	<td class="text-center"><input id="chaxunbtn" type="button" value="查询" class="btn btn-info " style="width:80px;" /></td>
     </tr>
 </table>
 
 <table  class="table table-bordered">
<!--一条直线-->
<td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong id="number"></strong></td>
 </table>
	<div id="one">
       <table class="table table-bordered">
         <tr>
           <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>快递单号</strong></td>
		   <td id="ID"width="21%" align="center">&nbsp;</td>
		 <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>快件状态</strong></td>
		 <td id="status" width="21%" align="center">&nbsp;</td>    
		 </tr>	
       </table>
	   <table class="table table-bordered">
	   <tr>
		   <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">快递类型</td>
		   <td id="type" width="21%" align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
		   <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">重量</td>
		   <td id="weight" width="21%" align="center">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
		   
         </tr>
		 <tr>
		 <td align="center" nowrap="nowrap" bgcolor="#f1f1f1">运输费</td>
		 <td id="tranFee" align="center">&nbsp;</td>
		 <td align="center" nowrap="nowrap" bgcolor="#f1f1f1">包装费</td>
		 <td id="packageFee" align="center">&nbsp;</td>   
		 </tr>
		 
		 <tr>
		 <td align="center" nowrap="nowrap" bgcolor="#f1f1f1">保险费</td>
		 <td id="insuFee" align="center">&nbsp;</td>
		 </tr>
	   </table>
	   
	   
	   
	   <table class="table table-bordered">
	   <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>寄件人信息</strong></td>
	   </table>
	   <table class="table table-bordered">
	   <tr>
		   <td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">寄件人</td>
		   <td id="sendername" width="21%"align="center">&nbsp;</td>
           <td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">手机号</td>
		   <td id="sendertel" width="21%"align="center">&nbsp;</td>
		   <td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">地址</td>
		   <td id="senderaddress" width="21%"align="center">&nbsp;</td>
		 </tr>
	   </table>
	   <table class="table table-bordered">
	   <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>收件人信息</strong></td>
	   </table>
 
	   <table class="table table-bordered">
	   <tr>
		   <td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">收件人</td>
		   <td id="recevername" width="21%"align="center">&nbsp;</td>
           <td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">手机号</td>
		   <td id="recevertel" width="21%"align="center">&nbsp;</td>
		   <td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">地址</td>
		   <td id="receveraddress" width="21%"align="center">&nbsp;</td>
           
		 </tr>
	   </table>
	   
	   <table class="table table-bordered">
	   <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>揽收配送信息</strong></td>
	   </table>
	   
	   <table class="table table-bordered">
	   <tr>
		   <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">揽收员</td>
		   <td id="accepter" width="21%" align="center">&nbsp;</td>
		   <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">揽收日期</td>
		   <td id="accepttime" width="21%" align="center">&nbsp;</td>
		   
		 </tr>
		 <tr>
		   <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">配送员</td>
		   <td id="deliver" width="21%" align="center">&nbsp;</td>
		   <td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">配送日期</td>
		   <td id="delivetime" width="21%" align="center">&nbsp;</td>
		 </tr>
	   </table>
	   
	   
	   
	   </div>
      
	<div id="many">
	
	</div>
  
   <table  class="margin-bottom-20 table  no-border" >
     <tr>
       <td class="text-center"><input type="button" value="打印" class="btn btn-info  margin-right-20" style="width:80px;" /><input type="button" value="数据导出" class="btn btn-info  " style="width:80px;" /></td>
     </tr>
   </table>
</div>
     
     
     </div>     
     </div>
    </div>
    
<!-- 底部 -->
<div id="footer">版权所有：晶科客流 &copy; 2015&nbsp;&nbsp;&nbsp;&nbsp;服务热线：0371-88888888</div>
    
    

 <script>
!function(){
laydate.skin('molv');
laydate({elem: '#Calendar'});
}();

function GetQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]); return null;
}
var canshu = GetQueryString("NowUserId");
$("#11").attr("href","searchAndDelete.html?NowUserId="+canshu);
$("#12").attr("href","addAndEditUser?NowUserId="+canshu);
$("#21").attr("href","singleSearch.html?NowUserId="+canshu);
$("#31").attr("href","expressDetail.html?NowUserId="+canshu);
$("#32").attr("href","expressTransList.html.html?NowUserId="+canshu);
$("#33").attr("href","expressTransList.html?NowUserId="+canshu);
$("#41").attr("href","packageSearch.html?NowUserId="+canshu);
$("#42").attr("href","productPackage.html.html?NowUserId="+canshu);
$("#51").attr("href","transTask.html?NowUserId="+canshu);
$("#52").attr("href","deliverTask.html?NowUserId="+canshu);


function SearchBytel(s1,s2){
	$.ajax({
		//url:"http://192.168.43.33:8888/TestCxfHibernate/REST/Domain/"+s1+"/"+s2+"?_type=json",
		url:"http://localhost:8088/TestCxfHibernate_war_exploded/REST/Domain/"+s1+"/"+s2+"?_type=json",
		type:'GET',
		dataType:'json',
		success:function(r) {
			var string = "";
			var i = 0;
			$("#one").hide();
			$("#many").html("");
			var nn = r.length;
			$("#number").text("提示：查询到"+nn+"个快件");
			while(i<r.length){
                string = string +
                    '<table style="border:3px solid #BA55D3;" class="table table-bordered"></table>' +
                    '<table class="table table-bordered">' +
                    '<tr>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>快递单号</strong></td>' +
                    '<td id="ID"width="21%" align="center">' + r[i].ID + '</td>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>快件状态</strong></td>' +
                    '<td id="status" width="21%" align="center">' + r[i].status + '</td>' +
                    '</tr>	' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '<tr>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">快递类型</td>' +
                    '<td id="type" width="21%" align="center">' + r[i].type + '</td>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">重量</td>' +
                    '<td id="weight" width="21%" align="center">' + r[i].weight + '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td align="center" nowrap="nowrap" bgcolor="#f1f1f1">运输费</td>' +
                    '<td id="tranFee" align="center">' + r[i].tranFee + '</td>' +
                    '<td align="center" nowrap="nowrap" bgcolor="#f1f1f1">包装费</td>' +
                    '<td id="packageFee" align="center">' + r[i].packageFee + '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td align="center" nowrap="nowrap" bgcolor="#f1f1f1">保险费</td>' +
                    '<td id="insuFee" align="center">' + r[i].insuFee + '</td>' +
                    '</tr>' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '<td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>寄件人信息</strong></td>' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '<tr>' +
                    '<td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">寄件人</td>' +
                    '<td id="sendername" width="21%"align="center">' + r[i].sender.name + '</td>' +
                    '<td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">手机号</td>' +
                    '<td id="sendertel" width="21%"align="center">' + r[i].sender.telCode + '</td>' +
                    '<td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">地址</td>' +
                    '<td id="senderaddress" width="21%"align="center">' + r[i].sender.regionString + '</td>' +
                    '</tr>' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '<td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>收件人信息</strong></td>' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '<tr>' +
                    '<td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">收件人</td>' +
                    '<td id="recevername" width="21%"align="center">' + r[i].recever.name + '</td>' +
                    '<td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">手机号</td>' +
                    '<td id="recevertel" width="21%"align="center">' + r[i].recever.telCode + '</td>' +
                    '<td width="12%"align="center" nowrap="nowrap" bgcolor="#f1f1f1">地址</td>' +
                    '<td id="receveraddress" width="21%"align="center">' + r[i].recever.regionString + '</td>' +
                    '</tr>' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '<td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>揽收配送信息</strong></td>' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '<tr>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">揽收员</td>' +
                    '<td id="accepter" width="21%" align="center">' + r[i].accepter + '</td>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">揽收日期</td>' +
                    '<td id="accepttime" width="21%" align="center">' + r[i].accepteTime + '</td>' +
                    '</tr>' +
                    '<tr>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">配送员</td>' +
                    '<td id="deliver" width="21%" align="center">' + r[i].deliver + '</td>' +
                    '<td width="12%" align="center" nowrap="nowrap" bgcolor="#f1f1f1">配送日期</td>' +
                    '<td id="delivetime" width="21%" align="center">' + r[i].deliveTime + '</td>' +
                    '</tr>' +
                    '</table>' +
                    '<table class="table table-bordered">' +
                    '</table>';
				
				
				i=i+1;
			}//while
			$("#many").append(string);
			},//success
			error:function (XMLHttpRequest, textStatus, errorThrown){
				alert("未查询到数据！");
			}
		
		});
}

//查询信息
$("#chaxunbtn").click(function(){

//获取查询条件的值  根据参数的不同选择方法
		var id =           $("#001").val();
        var sendertel =    $("#002").val();
        var receivertel =  $("#003").val();
		var packageid =    $("#004").val();
		if(id=="" && sendertel=="" && receivertel==""&& packageid==""){
			alert("查询条件不能为空！");
		}
		else{
						if(id != ""){
			var condition = id;//
			var f = "getExpressSheet";
			
			$.ajax({
			url:"http://localhost:8088/TestCxfHibernate/REST/Domain/"+f+"/"+condition+"?_type=json",//单号 查询一条
		//url:"http://192.168.43.33:8888/TestCxfHibernate/REST/Domain/"+f+"/"+condition+"?_type=json",//单号 查询一条
		//url:"http://192.168.43.215:8088/TestCxfHibernate/REST/Domain/"+f+"/"+condition+"?_type=json",//单号 查询一条
		type:'GET',
		dataType:'json',
		success:function(r) {
			$("#number").text("提示：查询到1个快件");
			alert("成功查询到快递单号为【"+$("#001").val()+"】的数据！"); //成功获取到数据的标志
			$("#many").html("");
			//$("#one").css("display","none");
			$("#one").show();
			//alert(condition);
			$("#ID").text(r.ID);
			$("#status").text(r.status);
			
			$("#type").text(r.type);
			$("#weight").text(r.weight); 
			$("#tranFee").text(r.tranFee);
			$("#packageFee").text(r.packageFee);
			$("#insuFee").text(r.insuFee);//没服务
			
			$("#sendername").text(r.sender.name); //寄件人信息
			$("#sendertel").text(r.sender.telCode);
			$("#senderaddress").text(r.sender.regionString);
			
			$("#recevername").text(r.recever.name);//收件人信息
			$("#recevertel").text(r.recever.telCode);
			$("#receveraddress").text(r.recever.regionString);
			
			$("#accepter").text(r.accepter); //揽收员
			$("#accepttime").text(r.accepteTime); //揽收日期
			$("#deliver").text(r.deliver); //派送员*/
			$("#delivetime").text(r.deliveTime); //派送日期*/
			},
			error:function (XMLHttpRequest, textStatus, errorThrown){
				alert("未查询到数据！");
			}
		
		});
		}
						else{
			if(packageid!=""){
				var condition = packageid;
				var f = "getExpressListInPackage/PackageId";
				SearchBytel(f,condition); //名不符实--实际是通过packageid查询
			}
			else{
				if(sendertel!= ""){
				var condition = sendertel;
				var f = "getExpressListBySndTel";
				SearchBytel(f,condition);
				}
				else{
				var condition = receivertel;
				var f = "getExpressListByRecTel";
				SearchBytel(f,condition);
				}
			}

		}
//这里无错
		}


	
		
});
 
</script>



 
</body>
</html>
