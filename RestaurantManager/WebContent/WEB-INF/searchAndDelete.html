<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>卓越物流管理系统</title>
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link rel="stylesheet" href="css/css.css"/>
    <script type="text/javascript" src="js/jquery1.9.0.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/sdmenu.js"></script>
    <script type="text/javascript" src="js/laydate/laydate.js"></script>
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
</head>
<body>
<div class="header">
    <div class="logo"><img src="img/网站大标题0.png"/></div>

    <div class="header-right">
        <i class="icon-question-sign icon-white"></i> <a href="#">帮助</a> <i class="icon-off icon-white"></i> <a
            id="modal-973558" href="#modal-container-973558" role="button" data-toggle="modal">注销</a> <i
            class="icon-user icon-white"></i> <a href="#">管理员的工作平台</a> <i class="icon-envelope icon-white"></i> <a
            href="#">发送短信</a>
        <div id="modal-container-973558" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true" style="width:300px; margin-left:-150px; top:30%">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h3 id="myModalLabel">
                    注销系统
                </h3>
            </div>
            <div class="modal-body">
                <p>
                    您确定要注销退出系统吗？
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">关闭</button>
                <a class="btn btn-primary" style="line-height:20px;" href="login.html">确定退出</a>
            </div>
        </div>
    </div>
</div>
<!-- 顶部 -->

<div id="middle">
    <div class="left">

        <script type="text/javascript">
            var myMenu;
            window.onload = function () {
                myMenu = new SDMenu("my_menu");
                myMenu.init();
            };
        </script>

        <div id="my_menu" class="sdmenu">
            <div>
                <span>用户管理</span>
                <a id="11" href="searchAndDelete.html">查询/删除用户</a>
                <a id="12" href="addAndEditUser.html">增加/编辑用户</a>
            </div>
            <div class="collapsed">
                <span>营业网点查询</span>
                <a id="21" href="singleSearch.html">单个网点查询</a>
            </div>
            <div class="collapsed">
                <span>快件管理</span>
                <a id="31" href="expressDetail.html.html">快件详细信息查询</a>
                <a id="32" href="expressTransList.html">快件转运列表追踪</a>
                <a id="33" href="expressTransList.html">快件转运地图追踪</a>
            </div>

            <div class="collapsed">
                <span>包裹管理</span>
                <a id="41" href="packageSearch.html">包裹单查询</a>
                <a id="42" href="productPackage.html.html">生成包裹单</a>
            </div>
            <div class="collapsed">
                <span>任务分配</span>
                <a id="51" href="transTask.html">转运任务分配</a>
                <a id="52" href="deliverTask.html">派送任务分配</a>
            </div>
        </div>

    </div>
    <div class="Switch"></div>
    <script type="text/javascript">
        $(document).ready(function (e) {
            $(".Switch").click(function () {
                $(".left").toggle();

            });
        });
    </script>

    <div class="right" id="mainFrame">

        <div class="right_cont">
            <ul class="breadcrumb">当前位置：
                <a href="#">用户管理</a> <span class="divider">/</span>
                用户增删改查
            </ul>
            <div class="title_right"><strong>用户增删改查</strong></div>
            <div style="width:900px; margin:auto">
                <table class="table table-bordered">
                    <tr>
                        <td width="10%" align="right" bgcolor="#f1f1f1">用户ID：</td>
                        <td width="25%"><input id="UID" style="width:200px" type="text" name="input18" class="span1-1"/>
                        </td>
                        <td width="10%" align="right" bgcolor="#f1f1f1">用户NAME：</td>
                        <td width="25%"><input id="UNAME" style="width:200px" type="text" name="input18"
                                               class="span1-1"/></td>
                        <td width="10%" align="right" bgcolor="#f1f1f1">用户电话：</td>
                        <td width="25%"><input id="UTEL" style="width:200px" type="text" name="" class="span1-1"/></td>
                    </tr>


                </table>
                <table class="margin-bottom-20 table  no-border">
                    <tr>
                        <td class="text-center"><input id="btnchaxun" type="button" value="查询" class="btn btn-info "
                                                       style="width:80px;"/></td>
                    </tr>
                </table>
                <table id="userinfo" class="table table-bordered">
                    <tr>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>用户ID</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>用户PWD</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>姓名</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>URUll</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>电话</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>状态</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>部门ID</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>接受包裹ID</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>投递包裹ID</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>转运包裹ID</strong></td>
                        <td align="center" nowrap="nowrap" bgcolor="#f1f1f1"><strong>操作</strong></td>
                    </tr>


                </table>

                <table class="margin-bottom-20 table  no-border">
                    <tr>
                        <td class="text-center">
                            <!--<input type="button" value="增加" class="btn btn-info  margin-right-20" style="width:80px;" />
                            <input type="button" value="修改" class="btn btn-info  margin-right-20" style="width:80px;" />-->
                            <input type="button" value="保存" class="btn btn-info  " style="width:80px;"/>
                        </td>
                    </tr>
                </table>
            </div>


        </div>
    </div>
</div>

<!-- 底部 -->
<div id="footer">版权所有：晶科客流 &copy; 2015&nbsp;&nbsp;&nbsp;&nbsp;服务热线：0371-88888888</div>


<script>

    !function () {
        laydate.skin('molv');
        laydate({elem: '#Calendar'});
    }();

    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }

    var canshu = GetQueryString("NowUserId");
    $("#11").attr("href", "searchAndDelete.html?NowUserId=" + canshu);
    $("#12").attr("href", "addAndEditUser?NowUserId=" + canshu);
    $("#21").attr("href", "singleSearch.html?NowUserId=" + canshu);
    $("#31").attr("href", "expressDetail.html?NowUserId=" + canshu);
    $("#32").attr("href", "expressTransList.html.html?NowUserId=" + canshu);
    $("#33").attr("href", "expressTransList.html?NowUserId=" + canshu);
    $("#41").attr("href", "packageSearch.html?NowUserId=" + canshu);
    $("#42").attr("href", "productPackage.html.html?NowUserId=" + canshu);
    $("#51").attr("href", "transTask.html?NowUserId=" + canshu);
    $("#52").attr("href", "deliverTask.html?NowUserId=" + canshu);

    $(function () { //自动执行
        var url = "http://localhost:8080/TestCxfHibernate_war_exploded/REST/Misc/";
        alert("111111111111");
        $("#btnchaxun").click(function () {
            //alert("XXX");
            if ($("#UID").val() != "") { //UID框 有值
                var condition = $("#UID").val();
                url = url + "getCustomerInfo/" + condition;
            } else {//UID框 无值
                if ($("#UNAME").val() != "") {//UNAME框 有值
                    var condition = $("#UNAME").val();
                    url = url + "getCustomerListByName/" + condition;
                } else {
                    if ($("#UTEL").val() != "") {
                        var condition = $("#UTEL").val();
                        url = url + "/getCustomerListByTelCode" + condition;
                    } else {
                        alert("输入框不能为空！");
                    }
                }
            }
            alert(url);
            //alert(s);
            $.ajax({
                url: url + '?_type=json',
                type: 'get',
                data: {"flag": 1},
                dataType: "json",
                success: function (r) {

                    console.log(r);
                    var o = '&lt;tr>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>用户ID&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>用户PWD&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>姓名&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>URUll&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>电话&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>状态&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>部门ID&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>接受包裹ID&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>投递包裹ID&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>转运包裹ID&lt;/strong>&lt;/td>' +
                        '&lt;td align="center" nowrap="nowrap" bgcolor="#f1f1f1">&lt;strong>操作&lt;/strong>&lt;/td>' +
                        '&lt;/tr>';
                    var i = 0;
                    //alert("查询到"+r.length+"个用户");

                    while (i &lt; r.length) {
                        o = o
                            + '&lt;tr>'

                            + '&lt;td align="center">' + r[i].UID + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].PWD + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].name + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].URull + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].telCode + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].status + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].dptID + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].receivePackageID + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].delivePackageID + '&lt;/td>'
                            + '&lt;td align="center">' + r[i].transPackageID + '&lt;/td>'
                            + '&lt;td align="center" nowrap="nowrap">&lt;a class="shanchu" >删除&lt;/a> &lt;a class="xiugai" href="">修改&lt;/a>&lt;/td>'
                            + '&lt;/tr>';
                        alert(o);
                        i = i + 1;
                    }
                    $("#userinfo").html("");
                    $("#userinfo").append(o);

                    $(".shanchu").click(function () {//删除用户事件

                        var uid = $("#r[i].UID").text();
                        $.ajax({
                            url: 'assass' + '?_type=json',
                            type: 'post',
                            data: {"uid": uid},
                            dataType: "json"
                        });
                        alert("删除成功！");
                    });

                    $(".xiugai").click(function () {//修改用户事件

                        var uid = $(this).parent().parent().children(":first").text();
                        alert(uid);
                        $(this).attr("href", "addAndEditUser.html?uid=" + uid + "&NowUserId=" + canshu);

                    });

                }//success
            });//ajax

        });//查询按钮事件

        //获取 所有用户信息  LIKE = 以什么开头    eq = “ = ”
        $.ajax({
            url: 'http://localhost:8088/TestCxfHibernate/REST/Domain/getUserList/PWD/like/1?_type=json',
            type: 'get',
            data: {"flag": 1},
            dataType: "json",
            success: function (r) {
                //alert("GET");
                var o = "";
                var i = 0;
                //alert("查询到"+r.length+"个用户");

                while (i &lt; r.length) {
                    o = o
                        + '&lt;tr>'

                        + '&lt;td align="center">' + r[i].UID + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].PWD + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].name + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].URull + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].telCode + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].status + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].dptID + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].receivePackageID + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].delivePackageID + '&lt;/td>'
                        + '&lt;td align="center">' + r[i].transPackageID + '&lt;/td>'
                        + '&lt;td align="center" nowrap="nowrap">&lt;a class="shanchu" >删除&lt;/a> &lt;a class="xiugai" href="">修改&lt;/a>&lt;/td>'
                        + '&lt;/tr>';
                    //alert(o);
                    i = i + 1;
                }
                $("#userinfo").append(o);

                $(".shanchu").click(function () {//删除用户事件

                    var uid = $("#r[i].UID").text();
                    $.ajax({
                        url: 'assass' + '?_type=json',
                        type: 'post',
                        data: {"uid": uid},
                        dataType: "json"
                    });
                    alert("删除成功！");
                });

                $(".xiugai").click(function () {//修改用户事件

                    var uid = $(this).parent().parent().children(":first").text();
                    alert(uid);
                    $(this).attr("href", "1用户管理 - 增加与编辑用户.html?uid=" + uid);

                });

            },//success
            error: function () {
                alert("获取用户数据失败！");
            }
        });//ajax 获取所有用户信息


    });
</script>


</body>
</html>
